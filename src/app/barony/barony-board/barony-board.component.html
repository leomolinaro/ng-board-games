<!-- <div *ngFor="let landTile of landTiles$ | async">
  {{ landTile.coordinates.x }} {{ landTile.type }}
</div> -->
<div class="b-board">
  <div class="b-board-layer" *ngLet="currentPlayer$ | async as currentPlayer">
    <div class="b-board-layer-top">
      <div
        [class]="'b-board-instruction-widget' + (currentPlayer ? (' is-' + currentPlayer.color) : '')">
        <div class="b-board-instruction">{{ message$ | async }}</div>
        <barony-knights-selector
          *ngIf="maxNumberOfKnights$ | async as maxNumberOfKnights"
          [(number)]="numberOfKnights"
          [max]="maxNumberOfKnights"
          min=1
          (confirm)="onKnightsConfirm ()">
        </barony-knights-selector>
      </div>
    </div>
    <div class="b-board-layer-bottom-left">
      <div *ngFor="let otherPlayer of (otherPlayers$ | async)" class="b-board-player-widget">
        <barony-player-status
          (selectPlayer)="onSelectPlayerChange (otherPlayer)"
          [player]="otherPlayer">
        </barony-player-status>
      </div>
      <div class="b-board-player-widget" *ngIf="currentPlayer">
        <barony-player-status
          [player]="currentPlayer"
          currentPlayer>
        </barony-player-status>
      </div>
    </div>
    <div class="b-board-layer-bottom-right">
      <ng-container *ngLet="validActions$ | async as validActions">
        <ng-container *ngLet="canPass$ | async as canPass">
          <barony-actions
            *ngIf="validActions || canPass"
            [canPass]="canPass"
            [validActions]="validActions"
            (actionClick)="onActionClick ($event)"
            (passClick)="onPassClick ()">
          </barony-actions>
        </ng-container>
      </ng-container>
    </div>
  </div>
  <div class="b-board-map">
    <barony-map
      [landTiles]="(landTiles$ | async)!"
      [validLandTiles]="(validLandTiles$ | async)!"
      (landTileClick)="onLandTileClick ($event)">
    </barony-map>
  </div>
</div>