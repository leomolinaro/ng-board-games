<div class="wotr-board">
  <!-- [validRegions]="validRegions" -->
  <wotr-map
    class="wotr-map"
    #wotrMap
    [regions]="regions ()"
    [nations]="nations ()"
    [hunt]="hunt ()"
    [freePeoples]="freePeoples ()"
    [shadow]="shadow ()"
    [fellowship]="fellowship ()"
    [characterById]="characterById ()"
    (regionClick)="onRegionClick ($event)">
  </wotr-map>
  <div class="wotr-toolbar">{{ message () }}</div>
  <div class="wotr-fronts">
    <mat-tab-group>
      @for (front of fronts (); track front.id) {
        <mat-tab [label]="front.name + ' ' + (front.handCards | bgTransform:nChaCards) + ' / ' + (front.handCards | bgTransform:nStrCards)"
          [labelClass]="front.id" [bodyClass]="front.id">
          <wotr-front-area
            [front]="front"
            [nations]="front.id === 'free-peoples' ? freePeoplesNations () : shadowNations ()"
            [characters]="characters ()"
            (cardClick)="onPreviewCardClick ($event, front)">
          </wotr-front-area>
        </mat-tab>
      }
      <mat-tab label="Hunt">
        <wotr-hunt-area
          [hunt]="hunt ()">
        </wotr-hunt-area>
      </mat-tab>
    </mat-tab-group>
  </div>
  <div class="wotr-action-dice-box">
    @for (front of fronts (); track front.id) {
      <div class="wotr-action-dice">
        @for (actionDie of front.actionDice; track actionDie) {
          <img [src]="actionDie | bgTransform:actionDieImage:front.id"/>
        }
        @for (actionToken of front.actionTokens; track actionToken) {
          <img [src]="actionToken | bgTransform:actionTokenImage:front.id"/>
        }
      </div>
    }
  </div>
  <div class="wotr-logs">
    <wotr-replay-buttons class="wotr-replay-buttons" (replayNext)="replayNext.next ($event)" (replayLast)="replayLast.next ()"></wotr-replay-buttons>
    <wotr-logs [logs]="logs ()"></wotr-logs>
  </div>
    <!-- [nationStates]="nationStates"
    [validUnits]="validUnits"
    [selectedUnits]="selectedUnits"
    (unitClick)="onUnitClick ($event)" -->
</div>
